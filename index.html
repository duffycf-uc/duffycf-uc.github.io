<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>WAPH-Cole Duffy Student</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-responsive-min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="index-style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body onload="getJoke()">
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

    <div class="pure-g">

        <div class="sidebar pure-u-1 pure-u-md-1-4">
            <div class="header">
                <h1 class="brand-title">Cole Duffy</h1>
                <img class="pure-img" src="images/headshot.jpg">
    
                <nav class="nav">
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a class="pure-button" href="http://purecss.io">Pure</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>


        <div class="wrapper">
            <div id="menubar">
                <h3>Student: Cole Duffy</h3>
                <div id="email" onclick="toggleEmailVisibility()">Show my email</div>
                <script src="toggleEmailVisibility.js"></script>
                <img src="images/headshot.jpg" alt="My headshot" width="50" />
                <div id="digit-clock"></div>
                <script type="text/javascript">
                    function displayTime() {
                        document.getElementById('digit-clock').innerHTML = "Current time: " + new Date();
                    }

                    setInterval(displayTime, 500)
                </script>
                <canvas id="analog-clock" width="150" height="150" style="background-color: #999;"></canvas>
                <script type="text/javascript" src="https://waph-uc.github.io/clock.js"></script>
                <script type="text/javascript">
                    var canvas = document.getElementById("analog-clock");
                    var ctx = canvas.getContext("2d");
                    var radius = canvas.height / 2;
                    ctx.translate(radius, radius);
                    radius = radius * 0.90;
                    setInterval(drawClock, 1000);

                    function drawClock() {
                        drawFace(ctx, radius);
                        drawNumbers(ctx, radius);
                        drawTime(ctx, radius);
                    }
                </script>
            </div>
            <div id="main">
                <p>A simple HTML page</p>
                Using the <a href="https://www.w3schools.com/html">W3Schools template</a>
                <hr>
                <b>Interaction with forms</b>
                <div>
                    <i>Form with an HTTP GET Rquest</i>
                    <form action="/echo.php" method="GET">
                        Your input: <input name="data">
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <div>
                    <i>Form with an HTTP POST Rquest</i>
                    <form action="/echo.php" method="POST" name="echo_post">
                        Your input: <input name="data" onkeypress="console.log('Your have pressed a key')">
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <hr>
                <b>Experiments with JavaScript code</b>
                <br>
                <div id="date" onclick="document.getElementById('date').innerHTML=Date()">Click here to show Date()
                </div>
                <hr>
                <div>
                    <i>Ajax requests</i>
                    <br>
                    Your input: <input name="data" onkeypress="console.log('Your have pressed a key')" id="data">
                    <input class="button round" type="submit" value="Submit" onclick="getEcho()">
                    <input class="button round" type="submit" value="jQuery AJAX GET Echo" onclick="jQueryAjax()">
                    <input class="button round" type="submit" value="jQuery AJAX POST Echo" onclick="jQueryAjaxPost()">
                    <input class="button round" type="button" value="Guess Age" onclick="guessAge($('#data').val())">
                    <div id="response"></div>
                    <div id="joke"></div>
                    <script type="text/javascript">
                        function getEcho() {
                            var input = document.getElementById("data").value;
                            if (input.length == 0) {
                                return;
                            }

                            var xhttp = new XMLHttpRequest();
                            xhttp.onreadystatechange = function () {
                                if (this.readyState == 4 && this.status == 200) {
                                    console.log("Recieved Data = " + xhttp.responseText);
                                    document.getElementById("response").innerText = "Response from server: " + xhttp.responseText;
                                }
                            }

                            xhttp.open("GET", "echo.php?data=" + input, true);
                            xhttp.send();
                            document.getElementById("data").value = "";
                        }

                        function jQueryAjax() {
                            var input = $("#data").val();
                            if (input.length == 0) return;
                            $.get("echo.php?data=" + input,
                                function (result) {
                                    $("#response").html("Response from server: " + result);
                                }
                            );
                            $("#data").val("");
                        }

                        function jQueryAjaxPost() {
                            var input = $("#data").val();
                            if (input.length == 0) return;
                            $.post("echo.php", { data: input },
                                function (result) {
                                    $("#response").html("Response from server: " + result);
                                }
                            );
                            $("#data").val("");
                        }

                        function getJoke() {
                            $.get("https://v2.jokeapi.dev/joke/Programming?type=single",
                                function (result) {
                                    $('#joke').html("Here's a joke: " + result.joke);
                                }
                            );
                        }

                        async function guessAge(name) {
                            const response = await fetch("https://api.agify.io/?name=" + name);
                            const result = await response.json();
                            $("#response").html("Hi " + name + ", your age should be " + result.age)
                        }
                    </script>
                </div>
            </div>
        </div>
    </div>
</body>

</html>